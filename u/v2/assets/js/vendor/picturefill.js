/* Picturefill | 2.2.0 | http://scottjehl.github.io/picturefill */
(function(e,t,n){"use strict";function i(e){var t,n,i,s,o,u=e||{};t=u.elements||r.getAllElements();for(var a=0,f=t.length;a<f;a++){n=t[a];i=n.parentNode;s=undefined;o=undefined;if(n.nodeName.toUpperCase()!=="IMG"){continue}if(!n[r.ns]){n[r.ns]={}}if(!u.reevaluate&&n[r.ns].evaluated){continue}if(i.nodeName.toUpperCase()==="PICTURE"){r.removeVideoShim(i);s=r.getMatch(n,i);if(s===false){continue}}else{s=undefined}if(i.nodeName.toUpperCase()==="PICTURE"||n.srcset&&!r.srcsetSupported||!r.sizesSupported&&n.srcset&&n.srcset.indexOf("w")>-1){r.dodgeSrcset(n)}if(s){o=r.processSourceSet(s);r.applyBestCandidate(o,n)}else{o=r.processSourceSet(n);if(n.srcset===undefined||n[r.ns].srcset){r.applyBestCandidate(o,n)}}n[r.ns].evaluated=true}}function s(){function r(){var t;if(!e._picturefillWorking){e._picturefillWorking=true;e.clearTimeout(t);t=e.setTimeout(function(){i({reevaluate:true});e._picturefillWorking=false},60)}}i();var n=setInterval(function(){i();if(/^loaded|^i|^c/.test(t.readyState)){clearInterval(n);return}},250);if(e.addEventListener){e.addEventListener("resize",r,false)}else if(e.attachEvent){e.attachEvent("onresize",r)}}if(e.HTMLPictureElement){e.picturefill=function(){};return}t.createElement("picture");var r={};r.ns="picturefill";(function(){r.srcsetSupported="srcset"in n;r.sizesSupported="sizes"in n})();r.trim=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")};r.endsWith=function(e,t){return e.endsWith?e.endsWith(t):e.indexOf(t,e.length-t.length)!==-1};r.restrictsMixedContent=function(){return e.location.protocol==="https:"};r.matchesMedia=function(t){return e.matchMedia&&e.matchMedia(t).matches};r.getDpr=function(){return e.devicePixelRatio||1};r.getWidthFromLength=function(e){e=e&&e.indexOf("%")>-1===false&&(parseFloat(e)>0||e.indexOf("calc(")>-1)?e:"100vw";e=e.replace("vw","%");if(!r.lengthEl){r.lengthEl=t.createElement("div");r.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden"}r.lengthEl.style.width=e;t.body.appendChild(r.lengthEl);r.lengthEl.className="helper-from-picturefill-js";if(r.lengthEl.offsetWidth<=0){r.lengthEl.style.width=t.documentElement.offsetWidth+"px"}var n=r.lengthEl.offsetWidth;t.body.removeChild(r.lengthEl);return n};r.types={};r.types["image/jpeg"]=true;r.types["image/gif"]=true;r.types["image/png"]=true;r.types["image/svg+xml"]=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1");r.types["image/webp"]=function(){var e="image/webp";n.onerror=function(){r.types[e]=false;i()};n.onload=function(){r.types[e]=n.width===1;i()};n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="};r.verifyTypeSupport=function(e){var t=e.getAttribute("type");if(t===null||t===""){return true}else{if(typeof r.types[t]==="function"){r.types[t]();return"pending"}else{return r.types[t]}}};r.parseSize=function(e){var t=/(\([^)]+\))?\s*(.+)/g.exec(e);return{media:t&&t[1],length:t&&t[2]}};r.findWidthFromSourceSize=function(e){var t=r.trim(e).split(/\s*,\s*/),n;for(var i=0,s=t.length;i<s;i++){var o=t[i],u=r.parseSize(o),a=u.length,f=u.media;if(!a){continue}if(!f||r.matchesMedia(f)){n=a;break}}return r.getWidthFromLength(n)};r.parseSrcset=function(e){var t=[];while(e!==""){e=e.replace(/^\s+/g,"");var n=e.search(/\s/g),r,i=null;if(n!==-1){r=e.slice(0,n);var s=r.slice(-1);if(s===","||r===""){r=r.replace(/,+$/,"");i=""}e=e.slice(n+1);if(i===null){var o=e.indexOf(",");if(o!==-1){i=e.slice(0,o);e=e.slice(o+1)}else{i=e;e=""}}}else{r=e;e=""}if(r||i){t.push({url:r,descriptor:i})}}return t};r.parseDescriptor=function(e,t){var n=t||"100vw",i=e&&e.replace(/(^\s+|\s+$)/g,""),s=r.findWidthFromSourceSize(n),o;if(i){var u=i.split(" ");for(var a=u.length-1;a>=0;a--){var f=u[a],l=f&&f.slice(f.length-1);if((l==="h"||l==="w")&&!r.sizesSupported){o=parseFloat(parseInt(f,10)/s)}else if(l==="x"){var c=f&&parseFloat(f,10);o=c&&!isNaN(c)?c:1}}}return o||1};r.getCandidatesFromSourceSet=function(e,t){var n=r.parseSrcset(e),i=[];for(var s=0,o=n.length;s<o;s++){var u=n[s];i.push({url:u.url,resolution:r.parseDescriptor(u.descriptor,t)})}return i};r.dodgeSrcset=function(e){if(e.srcset){e[r.ns].srcset=e.srcset;e.removeAttribute("srcset")}};r.processSourceSet=function(e){var t=e.getAttribute("srcset"),n=e.getAttribute("sizes"),i=[];if(e.nodeName.toUpperCase()==="IMG"&&e[r.ns]&&e[r.ns].srcset){t=e[r.ns].srcset}if(t){i=r.getCandidatesFromSourceSet(t,n)}return i};r.applyBestCandidate=function(e,t){var n,i,s;e.sort(r.ascendingSort);i=e.length;s=e[i-1];for(var o=0;o<i;o++){n=e[o];if(n.resolution>=r.getDpr()){s=n;break}}if(s&&!r.endsWith(t.src,s.url)){if(r.restrictsMixedContent()&&s.url.substr(0,"http:".length).toLowerCase()==="http:"){if(typeof console!==undefined){console.warn("Blocked mixed content image "+s.url)}}else{t.src=s.url;t.currentSrc=t.src;var u=t.style||{},a="webkitBackfaceVisibility"in u,f=u.zoom;if(a){u.zoom=".999";a=t.offsetWidth;u.zoom=f}}}};r.ascendingSort=function(e,t){return e.resolution-t.resolution};r.removeVideoShim=function(e){var t=e.getElementsByTagName("video");if(t.length){var n=t[0],r=n.getElementsByTagName("source");while(r.length){e.insertBefore(r[0],n)}n.parentNode.removeChild(n)}};r.getAllElements=function(){var e=[],n=t.getElementsByTagName("img");for(var i=0,s=n.length;i<s;i++){var o=n[i];if(o.parentNode.nodeName.toUpperCase()==="PICTURE"||o.getAttribute("srcset")!==null||o[r.ns]&&o[r.ns].srcset!==null){e.push(o)}}return e};r.getMatch=function(e,t){var n=t.childNodes,i;for(var s=0,o=n.length;s<o;s++){var u=n[s];if(u.nodeType!==1){continue}if(u===e){return i}if(u.nodeName.toUpperCase()!=="SOURCE"){continue}if(u.getAttribute("src")!==null&&typeof console!==undefined){console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.")}var a=u.getAttribute("media");if(!u.getAttribute("srcset")){continue}if(!a||r.matchesMedia(a)){var f=r.verifyTypeSupport(u);if(f===true){i=u;break}else if(f==="pending"){return false}}}return i};s();i._=r;if(typeof module==="object"&&typeof module.exports==="object"){module.exports=i}else if(typeof define==="function"&&define.amd){define(function(){return i})}else if(typeof e==="object"){e.picturefill=i}})(this,this.document,new this.Image);
